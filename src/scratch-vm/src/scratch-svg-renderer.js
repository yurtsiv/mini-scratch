!function(A,B){"object"==typeof exports&&"object"==typeof module?module.exports=B():"function"==typeof define&&define.amd?define([],B):"object"==typeof exports?exports.ScratchSVGRenderer=B():A.ScratchSVGRenderer=B()}(window,(function(){return function(A){var B={};function Q(g){if(B[g])return B[g].exports;var E=B[g]={i:g,l:!1,exports:{}};return A[g].call(E.exports,E,E.exports,Q),E.l=!0,E.exports}return Q.m=A,Q.c=B,Q.d=function(A,B,g){Q.o(A,B)||Object.defineProperty(A,B,{enumerable:!0,get:g})},Q.r=function(A){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(A,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(A,"__esModule",{value:!0})},Q.t=function(A,B){if(1&B&&(A=Q(A)),8&B)return A;if(4&B&&"object"==typeof A&&A&&A.__esModule)return A;var g=Object.create(null);if(Q.r(g),Object.defineProperty(g,"default",{enumerable:!0,value:A}),2&B&&"string"!=typeof A)for(var E in A)Q.d(g,E,function(B){return A[B]}.bind(null,E));return g},Q.n=function(A){var B=A&&A.__esModule?function(){return A.default}:function(){return A};return Q.d(B,"a",B),B},Q.o=function(A,B){return Object.prototype.hasOwnProperty.call(A,B)},Q.p="",Q(Q.s=7)}([function(A,B,Q){function g(){}Q(16).mixin(g),g.prototype.write=function(A,B,Q){this.emit("item",A,B,Q)},g.prototype.end=function(){this.emit("end"),this.removeAllListeners()},g.prototype.pipe=function(A){var B=this;function Q(){A.write.apply(A,Array.prototype.slice.call(arguments))}function g(){!A._isStdio&&A.end()}return B.emit("unpipe",A),A.emit("pipe",B),B.on("item",Q),B.on("end",g),B.when("unpipe",(function(E){var C=E===A||void 0===E;return C&&(B.removeListener("item",Q),B.removeListener("end",g),A.emit("unpipe")),C})),A},g.prototype.unpipe=function(A){return this.emit("unpipe",A),this},g.prototype.format=function(A){throw new Error(["Warning: .format() is deprecated in Minilog v2! Use .pipe() instead. For example:","var Minilog = require('minilog');","Minilog","  .pipe(Minilog.backends.console.formatClean)","  .pipe(Minilog.backends.console);"].join("\n"))},g.mixin=function(A){var B,Q=g.prototype;for(B in Q)Q.hasOwnProperty(B)&&(A.prototype[B]=Q[B])},A.exports=g},function(A,B,Q){"use strict";var g=function(){function A(A,B){for(var Q=0;Q<B.length;Q++){var g=B[Q];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(A,g.key,g)}}return function(B,Q,g){return Q&&A(B.prototype,Q),g&&A(B,g),B}}();var E=function(){function A(){!function(A,B){if(!(A instanceof B))throw new TypeError("Cannot call a class as a function")}(this,A)}return g(A,null,[{key:"attributeNamespace",value:function(){return{href:A.xlink,xlink:A.xmlns,xmlns:A.xmlns+"/","xmlns:xlink":A.xmlns+"/"}}},{key:"create",value:function(B,Q,g){return A.set(document.createElementNS(A.svg,B),Q,g)}},{key:"get",value:function(B,Q){var g=A.attributeNamespace[Q],E=g?B.getAttributeNS(g,Q):B.getAttribute(Q);return"null"===E?null:E}},{key:"set",value:function(B,Q,g){for(var E in Q){var C=Q[E],w=A.attributeNamespace[E];"number"==typeof C&&g&&(C=g.number(C)),w?B.setAttributeNS(w,E,C):B.setAttribute(E,C)}return B}},{key:"svg",get:function(){return"http://www.w3.org/2000/svg"}},{key:"xmlns",get:function(){return"http://www.w3.org/2000/xmlns"}},{key:"xlink",get:function(){return"http://www.w3.org/1999/xlink"}}]),A}();A.exports=E},function(A,B,Q){"use strict";var g=Q(9),E=Q(1),C=Q(3),w=Q(10),I=Q(11),Y=function(A,B){var Q=[];return function A(g){g.localName!==B&&void 0!==B||!g.getAttribute||Q.push(g);for(var E=0;E<g.childNodes.length;E++)A(g.childNodes[E])}(A),Q},F=function(A){var B=document.createElement("span"),Q=A.outerHTML,E=g.sanitize(Q,{USE_PROFILES:{svg:!0},FORBID_TAGS:["a","audio","canvas","video"],ADD_DATA_URI_TAGS:["image"]}),C=void 0;try{B.innerHTML=E,document.body.appendChild(B),C=B.children[0].getBBox()}finally{document.body.removeChild(B)}var w,I=void 0;0===C.width||0===C.height?I=0:(w=0,function A(B){B.getAttribute&&(B.getAttribute("stroke")&&(w=Math.max(w,1)),B.getAttribute("stroke-width")&&(w=Math.max(w,Number(B.getAttribute("stroke-width"))||0)));for(var Q=0;Q<B.childNodes.length;Q++)A(B.childNodes[Q])}(A),I=w/2);var Y=C.width+2*I,F=C.height+2*I,M=C.x-I,D=C.y-I;A.setAttribute("width",Y),A.setAttribute("height",F),A.setAttribute("viewBox",M+" "+D+" "+Y+" "+F)},M=function(A,B){B&&function(A){var B=Y(A,"linearGradient"),Q=!0,g=!1,E=void 0;try{for(var C,w=B[Symbol.iterator]();!(Q=(C=w.next()).done);Q=!0){var I=C.value;I.getAttribute("x2")||I.setAttribute("x2","0")}}catch(A){g=!0,E=A}finally{try{!Q&&w.return&&w.return()}finally{if(g)throw E}}}(A),I(A,window),function(A){var B=Y(A,"image"),Q="image-rendering: optimizespeed; image-rendering: pixelated;",g=!0,E=!1,C=void 0;try{for(var w,I=B[Symbol.iterator]();!(g=(w=I.next()).done);g=!0){var F=w.value;F.getAttribute("style")?F.setAttribute("style",Q+" "+F.getAttribute("style")):F.setAttribute("style",Q)}}catch(A){E=!0,C=A}finally{try{!g&&I.return&&I.return()}finally{if(E)throw C}}}(A),B?(function(A){var B=[];!function A(Q){"text"===Q.localName&&B.push(Q);for(var g=0;g<Q.childNodes.length;g++)A(Q.childNodes[g])}(A),C(A);var Q=!0,g=!1,w=void 0;try{for(var I,Y=B[Symbol.iterator]();!(Q=(I=Y.next()).done);Q=!0){var F=I.value;F.removeAttribute("x"),F.removeAttribute("y"),F.setAttribute("alignment-baseline","text-before-edge"),F.setAttribute("xml:space","preserve"),F.getAttribute("font-size")||F.setAttribute("font-size","18");var M=F.textContent,D=parseFloat(F.getAttribute("font-size")),c=0,U=1.2;if("Handwriting"===F.getAttribute("font-family")?(U=2,c=-11*D/22):"Scratch"===F.getAttribute("font-family")?(U=.89,c=-3*D/22):"Curly"===F.getAttribute("font-family")?(U=1.38,c=-6*D/22):"Marker"===F.getAttribute("font-family")?(U=1.45,c=-6*D/22):"Sans Serif"===F.getAttribute("font-family")?(U=1.13,c=-3*D/22):"Serif"===F.getAttribute("font-family")&&(U=1.25,c=-4*D/22),0===F.transform.baseVal.numberOfItems){var G=A.createSVGTransform();F.transform.baseVal.appendItem(G)}var N=F.transform.baseVal.getItem(0).matrix;if(N.e+=2*N.a+N.c*c,N.f+=2*N.b+N.d*c,M&&0===F.childElementCount){F.textContent="";var H=M.split("\n");M="";var J=!0,R=!1,h=void 0;try{for(var i,j=H[Symbol.iterator]();!(J=(i=j.next()).done);J=!0){var s=i.value,k=E.create("tspan");k.setAttribute("x","0"),k.setAttribute("style","white-space: pre"),k.setAttribute("dy",U+"em"),k.textContent=s||" ",F.appendChild(k)}}catch(A){R=!0,h=A}finally{try{!J&&j.return&&j.return()}finally{if(R)throw h}}}}}catch(A){g=!0,w=A}finally{try{!Q&&Y.return&&Y.return()}finally{if(g)throw w}}}(A),F(A),function(A){var B=Y(A),Q=!0,g=!1,E=void 0;try{for(var C,w=B[Symbol.iterator]();!(Q=(C=w.next()).done);Q=!0){var I=C.value;if(I.style){var F=I.style.stroke||I.getAttribute("stroke");F&&F.match(/^url\(#.*\)$/)&&(I.style["stroke-linejoin"]="round",I.style["stroke-linecap"]="round")}}}catch(A){g=!0,E=A}finally{try{!Q&&w.return&&w.return()}finally{if(g)throw E}}}(A)):A.getAttribute("viewBox")?A.getAttribute("width")&&A.getAttribute("height")||(A.setAttribute("width",A.viewBox.baseVal.width),A.setAttribute("height",A.viewBox.baseVal.height)):F(A)};A.exports=function(A,B){var Q=new DOMParser;A=w(A);var g=Q.parseFromString(A,"text/xml");if(g.childNodes.length<1||"svg"!==g.documentElement.localName)throw new Error("Document does not appear to be SVG.");var E=g.documentElement;return M(E,B),E}},function(A,B,Q){"use strict";A.exports=function(A){var B=[];!function A(Q){"text"===Q.localName&&B.push(Q);for(var g=0;g<Q.childNodes.length;g++)A(Q.childNodes[g])}(A);var Q=!0,g=!1,E=void 0;try{for(var C,w=B[Symbol.iterator]();!(Q=(C=w.next()).done);Q=!0){var I=C.value;I.getAttribute("font-family")&&"Helvetica"!==I.getAttribute("font-family")?"Mystery"===I.getAttribute("font-family")?I.setAttribute("font-family","Curly"):"Gloria"===I.getAttribute("font-family")?I.setAttribute("font-family","Handwriting"):"Donegal"===I.getAttribute("font-family")&&I.setAttribute("font-family","Serif"):I.setAttribute("font-family","Sans Serif")}}catch(A){g=!0,E=A}finally{try{!Q&&w.return&&w.return()}finally{if(g)throw E}}}},function(A,B){var Q={black:"#000",red:"#c23621",green:"#25bc26",yellow:"#bbbb00",blue:"#492ee1",magenta:"#d338d3",cyan:"#33bbc8",gray:"#808080",purple:"#708"};A.exports=function(A,B){return B?"color: #fff; background: "+Q[A]+";":"color: "+Q[A]+";"}},function(A,B,Q){"use strict";var g=Q(6);A.exports=function(A,B){var Q=(new XMLSerializer).serializeToString(A);return B&&(Q=g(Q)),Q}},function(A,B,Q){"use strict";var g=Q(24);A.exports=function(A){var B=g();if("string"!=typeof A)throw new Error("SVG to be inlined is not a string");for(var Q=new Set,E=/font-family="([^"]*)"/g,C=E.exec(A);C;)Q.add(C[1]),C=E.exec(A);if(Q.size>0){var w="<defs><style>",I=!0,Y=!1,F=void 0;try{for(var M,D=Q[Symbol.iterator]();!(I=(M=D.next()).done);I=!0){var c=M.value;Object.prototype.hasOwnProperty.call(B,c)&&(w+=""+B[c])}}catch(A){Y=!0,F=A}finally{try{!I&&D.return&&D.return()}finally{if(Y)throw F}}return w+="</style></defs>",A=A.replace(/<svg[^>]*>/,"$&"+w)}return A}},function(A,B,Q){"use strict";var g=Q(8),E=Q(32),C=Q(6),w=Q(2),I=Q(5),Y=Q(1),F=Q(3);A.exports={BitmapAdapter:E,convertFonts:F,inlineSvgFonts:C,loadSvgString:w,serializeSvgToString:I,SvgElement:Y,SVGRenderer:g}},function(A,B,Q){"use strict";var g=function(){function A(A,B){for(var Q=0;Q<B.length;Q++){var g=B[Q];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(A,g.key,g)}}return function(B,Q,g){return Q&&A(B.prototype,Q),g&&A(B,g),B}}();var E=Q(2),C=Q(5),w=function(){function A(B){!function(A,B){if(!(A instanceof B))throw new TypeError("Cannot call a class as a function")}(this,A),this._canvas=B||document.createElement("canvas"),this._context=this._canvas.getContext("2d"),this._measurements={x:0,y:0,width:0,height:0},this._cachedImage=null,this.loaded=!1}return g(A,[{key:"loadString",value:function(A,B){this._cachedImage=null;var Q=E(A,B);this._svgTag=Q,this._measurements={width:Q.viewBox.baseVal.width,height:Q.viewBox.baseVal.height,x:Q.viewBox.baseVal.x,y:Q.viewBox.baseVal.y}}},{key:"loadSVG",value:function(A,B,Q){this.loadString(A,B),this._createSVGImage(Q)}},{key:"_createSVGImage",value:function(A){var B=this;null===this._cachedImage&&(this._cachedImage=new Image);var Q=this._cachedImage;Q.onload=function(){B.loaded=!0,A&&A()};var g=this.toString(!0);Q.src="data:image/svg+xml;utf8,"+encodeURIComponent(g),this.loaded=!1}},{key:"toString",value:function(A){return C(this._svgTag,A)}},{key:"draw",value:function(A){if(!this.loaded)throw new Error("SVG image has not finished loading");this._drawFromImage(A)}},{key:"_drawFromImage",value:function(A){if(null!==this._cachedImage){var B=Number.isFinite(A)?A:1,Q=this._measurements;this._canvas.width=Q.width*B,this._canvas.height=Q.height*B,this._canvas.width<=0||this._canvas.height<=0||this._cachedImage.naturalWidth<=0||this._cachedImage.naturalHeight<=0||(this._context.clearRect(0,0,this._canvas.width,this._canvas.height),this._context.setTransform(B,0,0,B,0,0),this._context.drawImage(this._cachedImage,0,0))}}},{key:"canvas",get:function(){return this._canvas}},{key:"size",get:function(){return[this._measurements.width,this._measurements.height]}},{key:"viewOffset",get:function(){return[this._measurements.x,this._measurements.y]}}]),A}();A.exports=w},function(A,B,Q){p